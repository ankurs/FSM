a FSM implementation in C
